# 6.1 JTAG-DTM

```text
这个调试传输模块是基于一个普通的 "JTAG测试访问端口"(TAP)。
```
```text
JTAG TAP允许访问任意JTAG寄存器，首先使用JTAG指令寄存器(IR)选择一个，然后通过JTAG数据寄存器(DR)访问它。
```

- 6.1.1 JTAG背景
```text
JTAG是IEEE Std 1149.1-2013。
它定义了集成电路中可以包含的测试逻辑，用于
	测试集成电路之间的互连，测试集成电路本身，
	以及在器件正常工作时观察或修改电路活动的标准。
本规范使用后一种功能。

JTAG标准定义了一个测试访问端口(TAP)，可以用来读写一些自定义寄存器，这些寄存器可以用来与组件中的调试硬件通信。
```
- 6.1.2 JTAG DTM寄存器
```text
作为DTM使用的JTAG tap必须具有至少5位的IR。
当TAP复位时，IR必须默认为00001，选择IDCODE指令。
JTAG寄存器及其编码的完整列表见表6.1。
如果IR实际上超过5位，那么表6.1中的编码应该在其最有效位中扩展为0。

调试器可能使用的唯一常规JTAG寄存器是BYPASS和IDCODE，但是这个规范为许多其他标准JTAG指令留下了IR空间。

未实现的指令必须选择BYPASS寄存器。
```


- 6.1.7 JTAG连接器推荐

```text
// MIPI-10
为了便于获取调试硬件，本规范推荐与MIPI-10 .05英寸连接器规范兼容的连接器，如2011年3月16日版本1.10.00的MIPI联盟调试和跟踪连接器推荐所述。

连接器有0.05英寸的间距，镀金公头与0.016英寸厚的硬化铜或铍青铜方柱(SAMTEC FTSH或等效)。
母连接器兼容20µm金连接器。
从上面看男性头部(针脚指向你的眼睛)，一个目标的连接器看起来像它在表6.5。
各引脚的功能如表6.7所示。


如果平台需要nTRST，那么允许重用nRESET引脚作为nTRST信号。
```
```text
// MIPI-20
如果平台需要系统复位和TAP复位，则应该使用MIPI-20连接器。
它的物理连接器几乎与MIPI-10相同，除了它是MIPI-10的两倍长，支持两倍多的引脚。
它的连接器如表6.6所示。

```

```text
// cJTAG
// cJTAG 是 TI 公司的协议
// SWD 是 ARM 公司的协议
// SWD 和 cJTAG 都是 两根线,
// SWD : SWDCLK(TCK) , SWDIO(TMS)
// cJTAG: TCKC(TCK) , TMSC(TMS)
同样的连接器可以用于2线cJTAG。
在这种情况下，TMS用于TMSC, TCK用于TCKC。
```
